const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Booking-bEmXsT9j.js","assets/react-B1wZPQ-K.js","assets/prop-types-BiVUseAU.js","assets/Calendar-u-724qxG.js","assets/Confirmation-CYLL2YUR.js","assets/Dashboard-u-724qxG.js","assets/Error-CBJqZen4.js","assets/react-router-CQggbiSl.js","assets/@remix-run-D3bQaVdt.js","assets/Error-BlwNqqXV.css","assets/Login-51xzst4u.js","assets/firebase-D2mvULzg.js","assets/@firebase-CvUDpUTK.js","assets/idb-BXWtuYvb.js","assets/tslib-BGVaTf34.js","assets/react-dom-DmBrwDFL.js","assets/scheduler-CzFDRTuY.js","assets/react-router-dom-Ds01oWgm.js","assets/Login-BEzwh4Ha.css","assets/Logout-C4Jqdr6C.js","assets/Profile-CcllC-pU.js","assets/Administration-BLhmNRhT.js","assets/Home-CMkVfNjq.js","assets/SignUp-N_Jd3swn.js","assets/yup-D0TjtoPv.js","assets/property-expr-DEi1ZLzV.js","assets/tiny-case-BJ7jYKNY.js","assets/toposort-CMgDFqWq.js","assets/SignUp-DQngvdAW.css","assets/DeleteAccount-CELvBu32.js"])))=>i.map(i=>d[i]);
import{r as s,j as e,a as O}from"./react-B1wZPQ-K.js";import{c as w}from"./react-dom-DmBrwDFL.js";import{P as f}from"./prop-types-BiVUseAU.js";import{g as D,s as T,o as I,b as z}from"./firebase-D2mvULzg.js";import{v as N,w as V,x as U}from"./@firebase-CvUDpUTK.js";import{d as W,e as q,f as l,a as B}from"./react-router-CQggbiSl.js";import{L as m,H as F}from"./react-router-dom-Ds01oWgm.js";import"./scheduler-CzFDRTuY.js";import"./tslib-BGVaTf34.js";import"./idb-BXWtuYvb.js";import"./@remix-run-D3bQaVdt.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))u(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&u(r)}).observe(document,{childList:!0,subtree:!0});function c(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function u(n){if(n.ep)return;n.ep=!0;const o=c(n);fetch(n.href,o)}})();const K="modulepreload",H=function(t){return"/bookingapp/"+t},y={},a=function(i,c,u){let n=Promise.resolve();if(c&&c.length>0){document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),d=(r==null?void 0:r.nonce)||(r==null?void 0:r.getAttribute("nonce"));n=Promise.allSettled(c.map(p=>{if(p=H(p),p in y)return;y[p]=!0;const x=p.endsWith(".css"),C=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${C}`))return;const h=document.createElement("link");if(h.rel=x?"stylesheet":K,x||(h.as="script"),h.crossOrigin="",h.href=p,d&&h.setAttribute("nonce",d),document.head.appendChild(h),x)return new Promise((R,S)=>{h.addEventListener("load",R),h.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${p}`)))})}))}function o(r){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=r,window.dispatchEvent(d),!d.defaultPrevented)throw r}return n.then(r=>{for(const d of r||[])d.status==="rejected"&&o(d.reason);return i().catch(o)})},$={apiKey:"AIzaSyBf-UV2wzdvuGdUdAb4dUVKQln6hYJWtJY",authDomain:"bookingpage-bef4a.firebaseapp.com",projectId:"bookingpage-bef4a",storageBucket:"bookingpage-bef4a.appspot.com",messagingSenderId:"676485037932",appId:"1:676485037932:web:91736d92b774a628a23d49",measurementId:"G-6JTVF4PKK8"},j=t=>{console.error("Firebase Error:",t.message)};let _;try{_=N($)}catch(t){j(t)}let J;try{J=V(_)}catch(t){j(t)}let E;try{E=D(_)}catch(t){j(t)}let G;try{G=U(_)}catch(t){j(t)}const v=s.createContext(),k=({children:t})=>{const[i,c]=s.useState(null),u=o=>{c(o)},n=()=>{c(null)};return s.useEffect(()=>{T(E,z).then(()=>{I(E,o=>{c(o?{email:o.email,name:o.displayName||"Firebase User"}:null)})}).catch(o=>{console.error("Error setting persistence:",o)})},[]),e.jsx(v.Provider,{value:{user:i,login:u,logout:n},children:t})};k.propTypes={children:f.node.isRequired};const Y=()=>s.useContext(v),P=({children:t})=>{const{user:i}=Y();return console.log("ProtectedRoute: Current user =",i),i?(console.log("ProtectedRoute: User authenticated, rendering children."),t):(console.log("ProtectedRoute: User not authenticated, redirecting to login."),e.jsx(W,{to:"/login",replace:!0}))};P.propTypes={children:f.node.isRequired};const M=s.lazy(()=>a(()=>import("./Booking-bEmXsT9j.js"),__vite__mapDeps([0,1,2]))),Q=s.lazy(()=>a(()=>import("./Calendar-u-724qxG.js"),__vite__mapDeps([3,1,2]))),X=s.lazy(()=>a(()=>import("./Confirmation-CYLL2YUR.js"),__vite__mapDeps([4,1,2]))),Z=s.lazy(()=>a(()=>import("./Dashboard-u-724qxG.js"),__vite__mapDeps([5,1,2]))),ee=s.lazy(()=>a(()=>import("./Error-CBJqZen4.js"),__vite__mapDeps([6,1,2,7,8,9]))),te=s.lazy(()=>a(()=>import("./Login-51xzst4u.js"),__vite__mapDeps([10,1,2,11,12,13,14,7,8,15,16,17,18]))),oe=s.lazy(()=>a(()=>import("./Logout-C4Jqdr6C.js"),__vite__mapDeps([19,1,2]))),re=s.lazy(()=>a(()=>import("./Profile-CcllC-pU.js"),__vite__mapDeps([20,1,2]))),ne=s.lazy(()=>a(()=>import("./Administration-BLhmNRhT.js"),__vite__mapDeps([21,1,2,12,13,15,16,11,14,7,8,17]))),se=s.lazy(()=>a(()=>import("./Home-CMkVfNjq.js"),__vite__mapDeps([22,1,2]))),ie=s.lazy(()=>a(()=>import("./SignUp-N_Jd3swn.js"),__vite__mapDeps([23,1,2,11,12,13,14,24,25,26,27,15,16,7,8,17,28]))),ce=s.lazy(()=>a(()=>import("./DeleteAccount-CELvBu32.js"),__vite__mapDeps([29,1,2,11,12,13,14,7,8,15,16,17]))),le=()=>e.jsx(s.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsxs(q,{children:[e.jsx(l,{path:"/",element:e.jsx(se,{})}),e.jsx(l,{path:"/dashboard",element:e.jsx(Z,{})}),e.jsx(l,{path:"/booking",element:e.jsx(M,{})}),e.jsx(l,{path:"/calendar",element:e.jsx(Q,{})}),e.jsx(l,{path:"/confirmation",element:e.jsx(X,{})}),e.jsx(l,{path:"/login",element:e.jsx(te,{})}),e.jsx(l,{path:"/logout",element:e.jsx(oe,{})}),e.jsx(l,{path:"/profile",element:e.jsx(re,{})}),e.jsx(l,{path:"/administration",element:e.jsxs(P,{children:[console.log("Attempting to access /administration"),e.jsx(ne,{})]})}),e.jsx(l,{path:"/signup",element:e.jsx(ie,{})}),e.jsx(l,{path:"/deleteAccount",element:e.jsx(ce,{})}),e.jsx(l,{path:"*",element:e.jsx(ee,{})})]})});class A extends s.Component{constructor(i){super(i),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(i,c){console.error("Caught an error:",i,c)}render(){return this.state.hasError?e.jsx("h2",{children:"Noe gikk galt. Prøv å laste siden på nytt."}):this.props.children}}A.propTypes={children:f.node.isRequired};const ae="/bookingapp/assets/runningLogo-DzEqbChE.png",de=()=>{const{user:t,logout:i}=s.useContext(v),[c,u]=s.useState(!1),n=B(),o=()=>{u(p=>!p)},r=()=>{window.innerWidth<768&&u(!1)},d=()=>{n("/login"),r()};return e.jsxs("nav",{className:"navbar",children:[e.jsx("div",{className:"logo",children:e.jsx(m,{to:"/",onClick:r,children:e.jsx("img",{src:ae,alt:"Running Logo",loading:"lazy",className:"logo-img"})})}),e.jsxs("ul",{className:`nav-links ${c?"open":""}`,children:[e.jsx("li",{children:e.jsx(m,{to:"/",onClick:r,children:"Home"})}),e.jsx("li",{children:e.jsx(m,{to:"/administration",onClick:r,children:"Administrasjon"})}),e.jsx("li",{children:e.jsx(m,{to:"/booking",onClick:r,children:"Booking"})}),e.jsx("li",{children:e.jsx(m,{to:"/calendar",onClick:r,children:"Kalender"})}),e.jsx("li",{children:e.jsx(m,{to:"/dashboard",onClick:r,children:"Dashboard"})}),e.jsx("li",{children:e.jsx(m,{to:"/signup",onClick:r,children:"Sign up"})}),e.jsx("li",{children:e.jsx(m,{to:"/deleteAccount",onClick:r,children:"Delete Account"})})]}),e.jsx("div",{className:"auth-buttons",children:t?e.jsx("button",{onClick:()=>{i(),r()},children:"Logout"}):e.jsx("button",{onClick:d,children:"Login"})}),e.jsxs("div",{className:"hamburger",onClick:o,children:[e.jsx("span",{className:"bar"}),e.jsx("span",{className:"bar"}),e.jsx("span",{className:"bar"})]})]})},ue=()=>e.jsxs(A,{children:[" ",e.jsxs("div",{children:[e.jsx(de,{})," ",e.jsx(le,{})]})]});let g;const pe=()=>{const t="ws://localhost:8080";g=new WebSocket(t),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"?g&&g.close():document.visibilityState==="visible"&&(g=new WebSocket(t),b())}),b()},b=()=>{g.onopen=()=>{console.log("WebSocket tilkoblet")},g.onclose=()=>{console.log("WebSocket koblet fra. Prøver å koble til på nytt..."),setTimeout(()=>{g=new WebSocket("ws://localhost:8080"),b()},1e3)},g.onerror=t=>{console.error("WebSocket feil:",t)}},he=s.createContext(),L=({children:t})=>{const[i,c]=s.useState(null),u=o=>{c(o),console.error("App Error:",o)},n=()=>c(null);return e.jsxs(he.Provider,{value:{error:i,showError:u,clearError:n},children:[t,i&&e.jsxs("div",{className:"error-popup",children:[e.jsx("p",{children:i}),e.jsx("button",{onClick:n,children:"Lukk"})]})]})};L.propTypes={children:f.node.isRequired};pe();w.createRoot(document.getElementById("root")).render(e.jsx(O.StrictMode,{children:e.jsx(F,{children:e.jsxs(k,{children:[" ",e.jsx(L,{children:e.jsx(ue,{})})]})})}));export{v as A,E as a,J as f};
