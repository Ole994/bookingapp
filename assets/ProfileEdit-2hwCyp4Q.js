import{r as t,j as s}from"./react--XRl7haj.js";import{H as v,I as y,J as C,z as h,M as p}from"./@firebase-CJcwsLHv.js";import{s as w,d as x}from"./index-CuK6BhY5.js";import{P as d}from"./prop-types-BiVUseAU.js";import"./idb-BXWtuYvb.js";import"./react-dom-CIG6_WAD.js";import"./scheduler-CzFDRTuY.js";import"./firebase-jztzg6lO.js";import"./tslib-BGVaTf34.js";import"./react-router-B4NpJaNW.js";import"./@remix-run-D3bQaVdt.js";import"./react-router-dom-6adBjQk5.js";const P=({onClose:c,profileData:e,profileImageUrl:o})=>{const[n,m]=t.useState({name:(e==null?void 0:e.name)||"",email:(e==null?void 0:e.email)||"",phone:(e==null?void 0:e.phone)||"",address:(e==null?void 0:e.address)||"",postalCode:(e==null?void 0:e.postalCode)||"",postalPlace:(e==null?void 0:e.postalPlace)||"",city:(e==null?void 0:e.city)||"",uid:(e==null?void 0:e.uid)||"",country:(e==null?void 0:e.country)||"",gender:(e==null?void 0:e.gender)||"",birthDate:(e==null?void 0:e.birthDate)||""}),[u,j]=t.useState(null);t.useEffect(()=>{e&&m({name:e.name||"",email:e.email||"",phone:e.phone||"",address:e.address||"",postalCode:e.postalCode||"",postalPlace:e.postalPlace||"",city:e.city||"",uid:e.uid||"",country:e.country||"",birthDate:e.birthDate||"",gender:e.gender||""})},[e]);const a=l=>{const{name:i,value:r}=l.target;m({...n,[i]:r})},g=l=>{l.target.files[0]&&j(l.target.files[0])},N=async()=>{if(!(!u||!n.uid))try{const l=v(w,`profileImages/${n.uid}`);await y(l,u);const i=await C(l),r=h(x,"users",n.uid);await p(r,{profileImage:i},{merge:!0}),c()}catch(l){console.error("Error uploading image:",l)}},b=async()=>{try{const l=h(x,"users",n.uid);await p(l,n),console.log("Saved:",n),c()}catch(l){console.error("Error saving profile:",l)}};return s.jsxs("div",{className:"profile-edit-container",children:[o&&s.jsx("img",{src:o,alt:"Profile",className:"profile-image"}),s.jsx("h1",{children:"Rediger Profil"}),s.jsxs("div",{className:"profile-row",children:[s.jsx("label",{className:"profile-label",children:"Last opp nytt profilbilde:"}),s.jsx("input",{type:"file",accept:"image/*",onChange:g,className:"profile-input"}),s.jsx("button",{onClick:N,children:"Last opp"})]}),s.jsxs("div",{className:"profile-row",children:[s.jsx("label",{className:"profile-label",children:"Navn:"}),s.jsx("input",{type:"text",name:"name",value:n.name,onChange:a,className:"profile-input"})]}),s.jsxs("div",{className:"profile-row",children:[s.jsx("label",{className:"profile-label",children:"E-post:"}),s.jsx("input",{type:"email",name:"email",value:n.email,onChange:a,className:"profile-input"})]}),s.jsxs("div",{className:"profile-row",children:[s.jsx("label",{className:"profile-label",children:"Telefon:"}),s.jsx("input",{type:"text",name:"phone",value:n.phone,onChange:a,className:"profile-input"})]}),s.jsxs("div",{className:"profile-row",children:[s.jsx("label",{className:"profile-label",children:"addresse:"}),s.jsx("input",{type:"text",name:"address",value:n.address,onChange:a,className:"profile-input"})]}),s.jsxs("div",{className:"profile-row",children:[s.jsx("label",{className:"profile-label",children:"Postnummer:"}),s.jsx("input",{type:"text",name:"address",value:n.postalCode,onChange:a,className:"profile-input"})]}),s.jsxs("div",{className:"profile-row",children:[s.jsx("label",{className:"profile-label",children:"Post sted:"}),s.jsx("input",{type:"text",name:"place",value:n.postalPlace,onChange:a,className:"profile-input"})]}),s.jsxs("div",{className:"profile-row",children:[s.jsx("label",{className:"profile-label",children:"Land:"}),s.jsx("input",{type:"text",name:"Country",value:n.country,onChange:a,className:"profile-input"})]}),s.jsxs("div",{className:"profile-row",children:[s.jsx("label",{className:"profile-label",children:"by:"}),s.jsx("input",{type:"text",name:"city",value:n.city,onChange:a,className:"profile-input"})]}),s.jsxs("div",{className:"profile-row",children:[s.jsx("label",{className:"profile-label",children:"Bursdag:"}),s.jsx("input",{type:"date",name:"birthDate",value:n.birthDate,onChange:a,className:"profile-input"})]}),s.jsxs("div",{className:"profile-row",children:[s.jsx("label",{className:"profile-label",children:"Kj√∏nn:"}),s.jsx("input",{type:"text",name:"gender",value:n.gender,onChange:a,className:"profile-input"})]}),s.jsxs("div",{className:"profile-row",children:[s.jsx("label",{className:"profile-label",children:"Beskrivelse:"}),s.jsx("textarea",{name:"description",value:n.description,onChange:a,className:"profile-input"})]}),s.jsxs("div",{className:"button-group",children:[s.jsx("button",{className:"save-button",onClick:b,children:"Lagre"}),s.jsx("button",{className:"cancel-button",onClick:c,children:"Avbryt"})]})]})};P.propTypes={onClose:d.func.isRequired,profileData:d.object.isRequired,profileImageUrl:d.string.isRequired};export{P as default};
