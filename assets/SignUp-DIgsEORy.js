import{r as n,j as e}from"./react-B1wZPQ-K.js";import{a as j,f as P}from"./index-e2aQGH1R.js";import{c as v}from"./firebase-D2mvULzg.js";import{D as w,z as q}from"./@firebase-CvUDpUTK.js";import{c as C,a as t,b as f}from"./yup-D0TjtoPv.js";import"./prop-types-BiVUseAU.js";import"./react-dom-DmBrwDFL.js";import"./scheduler-CzFDRTuY.js";import"./react-router-CQggbiSl.js";import"./@remix-run-D3bQaVdt.js";import"./react-router-dom-Ds01oWgm.js";import"./tslib-BGVaTf34.js";import"./idb-BXWtuYvb.js";import"./property-expr-DEi1ZLzV.js";import"./tiny-case-BJ7jYKNY.js";import"./toposort-CMgDFqWq.js";const y=C({name:t().required("Name is required"),phone:t().matches(/^[0-9]{8,15}$/,"Phone number must be between 8 and 15 digits").required("Phone number is required"),address:t().required("Address is required"),postalCode:t().matches(/^[0-9]{4}$/,"Postal code must be exactly 4 digits").required("Postal code is required"),postalPlace:t().required("Postal place is required"),city:t().required("City is required"),email:t().email("Please enter a valid email address").required("Email is required"),password:t().min(12,"Password must be at least 12 characters long").matches(/[A-Z]/,"Password must contain at least one uppercase letter").matches(/[a-z]/,"Password must contain at least one lowercase letter").matches(/[0-9]/,"Password must contain at least one number").matches(/[!@#$%^&*(),.?":{}|<>]/,"Password must contain at least one special character").required("Password is required"),confirmPassword:t().oneOf([f("password"),null],"Passwords must match").required("Confirm password is required")}),B=()=>{const[s,d]=n.useState({name:"",phone:"",address:"",postalCode:"",postalPlace:"",city:"",email:"",password:"",confirmPassword:""}),[a,c]=n.useState({}),[u,p]=n.useState(null),[m,h]=n.useState(null),r=l=>{const{name:i,value:o}=l.target;d({...s,[i]:o})},g=async l=>{l.preventDefault(),c({}),h(null),p(null);try{await y.validate(s,{abortEarly:!1});const o=(await v(j,s.email,s.password)).user;await w(q(P,"users"),{uid:o.uid,name:s.name,email:s.email,phone:s.phone,address:s.address,postalCode:s.postalCode,postalPlace:s.postalPlace,city:s.city}),p("User registered successfully!"),d({name:"",phone:"",address:"",postalCode:"",postalPlace:"",city:"",email:"",password:"",confirmPassword:""})}catch(i){if(i.name==="ValidationError"){const o={};i.inner.forEach(x=>{o[x.path]=x.message}),c(o)}else console.error("Error signing up:",i.message),h(i.message)}};return e.jsx("div",{className:"signup-page",children:e.jsxs("div",{className:"signup-box",children:[e.jsx("h2",{children:"Create Account"}),m&&e.jsx("p",{className:"message error",children:m}),u&&e.jsx("p",{className:"message success",children:u}),e.jsxs("form",{onSubmit:g,className:"signup-form",children:[e.jsxs("div",{className:"input-group",children:[e.jsx("input",{type:"text",placeholder:"Name",name:"name",value:s.name,onChange:r,required:!0}),a.name&&e.jsx("div",{className:"input-error",children:a.name})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("input",{type:"tel",placeholder:"Phone",name:"phone",value:s.phone,onChange:r,required:!0}),a.phone&&e.jsx("div",{className:"input-error",children:a.phone})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("input",{type:"text",placeholder:"Address",name:"address",value:s.address,onChange:r,required:!0}),a.address&&e.jsx("div",{className:"input-error",children:a.address})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("input",{type:"text",placeholder:"Postal Code",name:"postalCode",value:s.postalCode,onChange:r,required:!0}),a.postalCode&&e.jsx("div",{className:"input-error",children:a.postalCode})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("input",{type:"text",placeholder:"Postal Place",name:"postalPlace",value:s.postalPlace,onChange:r,required:!0}),a.postalPlace&&e.jsx("div",{className:"input-error",children:a.postalPlace})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("input",{type:"text",placeholder:"City",name:"city",value:s.city,onChange:r,required:!0}),a.city&&e.jsx("div",{className:"input-error",children:a.city})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("input",{type:"email",placeholder:"Email",name:"email",value:s.email,onChange:r,required:!0}),a.email&&e.jsx("div",{className:"input-error",children:a.email})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("input",{type:"password",placeholder:"Password",name:"password",value:s.password,onChange:r,required:!0}),a.password&&e.jsx("div",{className:"input-error",children:a.password})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("input",{type:"password",placeholder:"Confirm Password",name:"confirmPassword",value:s.confirmPassword,onChange:r,required:!0}),a.confirmPassword&&e.jsx("div",{className:"input-error",children:a.confirmPassword})]}),e.jsx("button",{type:"submit",className:"submit-button",children:"Sign Up"})]})]})})};export{B as default};
